## 指令：计算机的语言

#### 引言

- 指令集（一台计算机的全部指令）：一个给定的计算机体系结构所包含的指令集合。
- 存储程序概念：多种类型的指令和数据均以数字形式存储于存储器中的概念，存储程序形计算机即源于此。


#### 计算机硬件的操作数

- MIPS算术运算指令的操作数是很严格的，它们必须来自寄存器，寄存器由硬件直接构建且数量有限。

- MIPS体系结构中寄存器大小为32位，由于32位一组的情况经常出现，因此在MIPS体系结构中将其称为字（word）
  - 存储器操作数

    1. 数据传输指令：在存储器和寄存器之间移动数据的指令
    2. 地址：用于在存储器空间中指明某特定数据元素位置的值。

    ---

    1. 取数（load）：将数据从存储器复制到寄存器的数据传送指令。实际的MIPS取数指令助记符为lw。
       - A[8]的使用需要lw。lw  $t0 , 8(\$s3)。因为数组A的头元素在s3寄存器中，A[8]的值在存储器中，要取到寄存器中才可以使用。
    2. 在上个例子中，数据传送指令中的常量为偏移量(offset),存放基址的寄存器为基址寄存器(base register)

  - 常数或立即数操作

    1. 要使用常数必须先将其从存储器中取出。（常数可能是在程序被加载时放入存储器的）
       - lw  $t0 ,  AddrConstant4(\$s1)
    2. 避免使用取数指令的另一个方法是，提供其中一个操作数是常数的算术运算指令，也就是含立即数指令。
       - 常数操作数出现频率高，相对于从存储器中取常数，包含常数的算术运算指令速度快很多，而且能耗较低。
       - 常数0还有另外的作用，有效使用它还可以简化指令集。例如数据传送指令可以视作一个操作数为0的加法，因此MIPS将寄存器$zero恒置为0.根据使用频率来确定要定义的常数是加速大概率事件的另一个好办法。

- 有符号数和无符号数


-   二进制数位：也称二进制位，二进制的状态之一，即1或0，是信息的基本组成单位。
    1. 最低有效位：在MIPS字中最右边的一位
    2. 最高有效位：在MIPS字中最左边的一位
-   硬件可以对二进制数进行加减乘除，如果操作结果不能被最右端的硬件二进制位所表示，那么就发生了溢出。如何处理溢出是由编程语言、操作系统和程序来决定的。
    - 有符号数和无符号数
      1. 增加一个独立的符号位，符号和幅值表示法，但由于缺点太多被抛弃。
      2. 现在所有计算机都采用二进制补码表示法表示有符号数
         - 前导位0为正数，1为负数。
    - 16位扩展为32位（符号扩展）
      1. 如果是正数，在左侧扩展16个0
      2. 如果是负数，在左侧扩展16个1

-   计算机中的指令表示

    - add  $t0  ,  \$s1  , \$s2

      - 指令的二进制表示

      ![image_1483090707.422526](image_1483090707.422526.jpg)

      - 指令的十进制表示

      ![image_1483090710.624213](image_1483090710.624213.jpg) 

      - MIPS指令的一般形式

      ![ image_1483090928.194756](image_1483090928.194756.jpg) 

      - 指令解释：

        1. op：指令的基本操作，通常称为操作码(opcode)
        2. rs：第一个源操作数寄存器
        3. rt：第二个源操作数寄存器
        4. rd：用于存放操作结果的目的寄存器
        5. shamt：偏移量
        6. funct：一般为功能码，用于指明op字段中操作的特定变式

        ​